<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Listings</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f9f9f9;
            color: #333;
        }

        .hotels-container {
            width: 90%;
            margin: 20px auto;
            padding: 0 10px;
        }

        .hotels-block {
            display: flex;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            overflow: hidden;
            align-items: flex-start;
        }

        .hotels-image {
            position: relative;
            width: 35%;
            max-width: 400px;
            height: 300px;
            overflow: hidden;
            border-radius: 8px;
        }

        .hotels-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.3s ease;
        }

        .hotels-image-switcher {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            justify-content: space-between;
            width: 100%;
            z-index: 10;
        }

        .hotels-arrow {
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
            font-size: 20px;
        }

        .hotels-info {
            padding: 20px;
            width: 45%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .hotels-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .hotels-details {
            font-size: 14px;
            color: #555;
            margin-bottom: 15px;
        }

        .hotels-amenities, .hotels-addons {
            font-size: 14px;
            color: #777;
            margin-top: 10px;
        }

        .hotels-price-section {
            padding: 20px;
            width: 20%;
            background: #f2f2f2;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: flex-end;
            text-align: right;
        }

        .hotels-price {
            font-size: 22px;
            font-weight: bold;
            color: #28a745;
            margin-bottom: 10px;
        }

        .hotels-select-room-btn {
            padding: 12px 20px;
            font-size: 14px;
            font-weight: bold;
            color: white;
            background-color: #28a745;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .hotels-select-room-btn:hover {
            background-color: #218838;
        }

        .hotels-error-message {
            color: red;
            text-align: center;
            margin-top: 20px;
        }

        .hotels-image-thumbnails {
            display: flex;
            justify-content: center;
            margin-top: 10px;
        }

        .hotels-image-thumbnails img {
            width: 60px;
            height: 60px;
            margin-right: 5px;
            cursor: pointer;
            border-radius: 4px;
            object-fit: cover;
        }

        .hotels-image-thumbnails img:hover {
            border: 2px solid #28a745;
        }
    </style>
</head>
<body>
    <div class="hotels-container" id="hotels-container">
    </div>

    <script>
        async function fetchHotels() {
            try {
                const response = await fetch("https://api.travelcircus.net/hotels/15823/quotes?locale=de_DE&checkin=2025-01-24&checkout=2025-01-28&party=%7B%22adults%22:2,%22children%22:[]%7D&domain=de");

                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const data = await response.json();
                const hotels = data._embedded?.hotel_quotes || [];
                const container = document.getElementById("hotels-container");

                if (hotels.length === 0) {
                    container.innerHTML = `<p class="hotels-error-message">No hotels available for the selected dates.</p>`;
                    return;
                }

                hotels.forEach(hotel => {
                    const {
                        name,
                        full_formatted_price,
                        room_size_min,
                        room_size_max,
                        base_capacity,
                        max_capacity,
                        description,
                        _embedded
                    } = hotel;

                    const imageUrls = _embedded?.pictures?.map(pic => pic.full) || [];
                    const roomSize = room_size_min ? `${room_size_min} - ${room_size_max} m²` : "N/A";
                    const amenities = _embedded?.amenities?.map(a => a.description).join(", ") || "No amenities available";
                    const addons = _embedded?.addons?.map(a => `${a.description}: ${a.price}`).join("<br>") || "No addons available";

                    const hotelBlock = document.createElement("div");
                    hotelBlock.className = "hotels-block";
                    hotelBlock.innerHTML = `
                        <div class="hotels-image">
                            <img src="${imageUrls[0] || "https://via.placeholder.com/300x200?text=Image+Unavailable"}" alt="${name}" id="hotels-img">
                            ${imageUrls.length > 1 ? `
                            <div class="hotels-image-switcher">
                                <button class="hotels-arrow" id="hotels-prev-img">&#60;</button>
                                <button class="hotels-arrow" id="hotels-next-img">&#62;</button>
                            </div>` : ''}
                        </div>
                        <div class="hotels-info">
                            <div>
                                <div class="hotels-title">${name}</div>
                                <div class="hotels-details">
                                    Room size: ${roomSize} · Capacity: ${base_capacity} - ${max_capacity} persons
                                    <br>${description || "No short description available"}
                                </div>
                            </div>
                            <div class="hotels-amenities">
                                <strong>Amenities:</strong> ${amenities}
                            </div>
                            <div class="hotels-addons">
                                <strong>Available Addons:</strong> <br> ${addons}
                            </div>
                        </div>
                        <div class="hotels-price-section">
                            <div class="hotels-price">${full_formatted_price || "Price not available"}</div>
                            <button class="hotels-select-room-btn">Select Room</button>
                        </div>
                    `;
                    container.appendChild(hotelBlock);

                    // Image switcher functionality
                    if (imageUrls.length > 1) {
                        let currentImageIndex = 0;

                        const prevImgButton = hotelBlock.querySelector("#hotels-prev-img");
                        const nextImgButton = hotelBlock.querySelector("#hotels-next-img");

                        prevImgButton.addEventListener("click", () => {
                            currentImageIndex = (currentImageIndex - 1 + imageUrls.length) % imageUrls.length;
                            document.getElementById("hotels-img").src = imageUrls[currentImageIndex];
                        });

                        nextImgButton.addEventListener("click", () => {
                            currentImageIndex = (currentImageIndex + 1) % imageUrls.length;
                            document.getElementById("hotels-img").src = imageUrls[currentImageIndex];
                        });
                    }
                });
            } catch (error) {
                console.error("Error fetching hotel data:", error);
                document.getElementById("hotels-container").innerHTML = `<p class="hotels-error-message">Failed to fetch hotel data. Please try again later.</p>`;
            }
        }

        fetchHotels();
    </script>
</body>
</html>